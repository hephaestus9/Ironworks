{% extends "pyemoncms/pyemoncms_base.html" %}

{% block content2 %}

    <!--pyemoncms-->
    <link href="{{ url_for('static', filename='pyemoncms/js/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='pyemoncms/js/bootstrap/css/bootstrap-responsive.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='pyemoncms/js/bootstrap-datetimepicker-0.0.11/css/bootstrap-datetimepicker.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='pyemoncms/themes/default/css/emon.css') }}" rel="stylesheet">

                    <div id="sub-nav">
                      <ul class="dropdown">
                        <li><a href="{{url_for('pyemon_user')}}">User</a></li>
                        <li><a href="{{url_for('pyemon_node')}}">Node</a></li>
                        <li><a href="{{url_for('pyemon_input')}}">Input</a></li>
                        <li><a href="{{url_for('pyemon_vis')}}">Vis</a></li>
                        <li><a href="{{url_for('pyemon_dashboard')}}">Dasboard</a></li>
                        <li class="last"><a href="#">Extras</a>
                          <ul>
                            <li class="last"><a href="{{url_for('pyemon_myelectric')}}">My Electric</a></li>
                          </ul>
                        </li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li class="last"><a href="#">&nbsp;</a></li>
                        <li><a href="#">Log Out</a></li>
                        <li><a href="{{url_for('pyemon_docs')}}" class="active">Docs</a></li>
                        <li class="last"><a href="http://ironworks.ignorelist.com/emoncms" target="_blank">EMONCMS</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>


            <!--==============================content================================-->
            <div id="main">
                <div class="shell">
                  <div id="content" class="left">
                    <div class="box" style="background-color:RGBA(0,0,0,0.25);">
                      <h2 class="title" style="color:white;">Input API</h2>
                        <div class="follow-item">
                          <p><span class="author">Apikey authentication</span></p>
                          <p style="color:white;opacity: 0.5;">If you want to call any of the following actions when your not logged in, add an apikey to the URL of your request.</p>
                        </div>
                    </div>
                    <div class="box" style="background-color:RGBA(0,0,0,0.25);">
                      <h2 class="title" style="color:white;">Available HTML URLs</h2>
                        <div class="follow-item">
                          <table class="table">
                            <tr><td style="color:white;opacity: 0.5;">The input list view</td><td><a href="http://0.0.0.0:7000/pyemon_node">http://0.0.0.0:7000/pyemon_node</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">This page</td><td><a href="http://0.0.0.0:7000/pyemon_api">http://0.0.0.0:7000/pyemon_api</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">Input processing configuration page</td><td><a href="http://0.0.0.0:7000/pyemon_input/process?inputid=1">http://0.0.0.0:7000/pyemon_input/process?inputid=1</a></td></tr>
                          </table>
                        </div>
                    </div>
                    <div class="box" style="background-color:RGBA(0,0,0,0.25);">
                      <h2 class="title" style="color:white;">Available JSON commands</h2>
                        <div class="follow-item">
                          <p style="color:white;opacity: 0.5;">To use the json api the request url needs to include <b>.json</b></p>
                          <p style="color:white;"><b>Post data</b></p>
                          <table class="table">
                            <tr><td style="color:white;opacity: 0.5;">Create Node:</td><td><a href="http://0.0.0.0:7000/pyemon_node/create_node?node={'apikey_write': '{{writeKey}}', 'userid': '1', 'description':'System_Test_Node'}">http://0.0.0.0:7000/pyemon_node/create_node?node={"apikey_write": "{{writeKey}}", "userid": "1", "description": "Sytem_Test_Node"}</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">JSON format:</td><td><a href="http://0.0.0.0:7000/pyemon_input/post_json?json={power:200}">http://0.0.0.0:7000/pyemon_input/post_json?json={power:200}</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">CSV format:</td><td><a href="http://0.0.0.0:7000/pyemon_input/post_json?csv=100,200,300">http://0.0.0.0:7000/pyemon_input/post_json?csv=100,200,300</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">Assign inputs to a node group</td><td><a href="http://0.0.0.0:7000/pyemon_input/post_json?node=1&csv=100,200,300">http://0.0.0.0:7000/pyemon_input/post_json?<b>node=1</b>&csv=100,200,300</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">Set the input entry time manually</td><td><a href="http://0.0.0.0:7000/pyemon_input/post_json?time=1418916424&node=1&csv=100,200,300">http://0.0.0.0:7000/pyemon_input/post_json?<b>time=1418916424</b>&node=1&csv=100,200,300</a></td></tr>
                          </table>
                          <p style="color:white;"><b>APIKEY</b></p>
                          <p style="color:white;opacity: 0.5;">To post data from a remote device you will need to include in the request url your write apikey. This give your device write access to your emoncms account, allowing it to post data.</p>
                          <table class="table">
                            <tr><td style="color:white;opacity: 0.5;">For example using the first json type request above just add the apikey to the end like this:</td><td><a href="http://emoncms.org/input/post.json?json={power:200}&apikey="{{writeKey}}>http://0.0.0.0:7000/pyemon_input/post_json?json={power:200, <b>apikey_write={{writeKey}}</b>}</a></td></tr>
                          </table>
                          <p style="color:white;"><b>Bulk data</b>
                          <table class="table">
                            <tr><td style="color:white;opacity: 0.5;">You can provide data using bulk mode</td><td><a href="http://emoncms.org/input/bulk.json?data=[[0,16,1137],[2,17,1437,3164],[4,19,1412,3077]]">http://emoncms.org/input/bulk.json?data=[[0,16,1137],[2,17,1437,3164],[4,19,1412,3077]]</a></td></tr>
                          </table>
                          <ul>
                            <li style="color:white;opacity: 0.5;">The first number of each node is the time offset (see below).</li>
                            <li style="color:white;opacity: 0.5;">The second number is the node id, this is the unique identifer for the wireless node.</li>
                            <li style="color:white;opacity: 0.5;">All the numbers after the first two are data values. The second node here (node 17) has two data values: 1437 and 3164.</li>
                            <li style="color:white;opacity: 0.5;">Optional offset and time parameters allow the sender to set the time reference for the packets. If none is specified, it is assumed that the last packet just arrived. The time for the other packets is then calculated accordingly.</li>
                          </ul>
                          <table class="table">
                            <tr><td style="color:white;opacity: 0.5;">Legacy default format (4 is now, 2 is -2 seconds and 0 is -4 seconds to now):</td><td><a href="http://emoncms.org/input/bulk.json?data=[[0,16,1137],[2,17,1437,3164],[4,19,1412,3077]]">http://emoncms.org/input/bulk.json?data=[[0,16,1137],[2,17,1437,3164],[4,19,1412,3077]]</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">Time offset format (-6 is -16 seconds to now):</td><td><a href="http://emoncms.org/input/bulk.json?data=[[-10,16,1137],[-8,17,1437,3164],[-6,19,1412,3077]]&offset=-10">http://emoncms.org/input/bulk.json?data=[[-10,16,1137],[-8,17,1437,3164],[-6,19,1412,3077]]<b>&offset=-10</b></a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">Sentat format: (useful for sending as positive increasing time index)</td><td><a href="http://emoncms.org/input/bulk.json?data=[[520,16,1137],[530,17,1437,3164],[535,19,1412,3077]]&sentat=543">http://emoncms.org/input/bulk.json?data=[[520,16,1137],[530,17,1437,3164],[535,19,1412,3077]]<b>&sentat=543</b></b></a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">Absolute time format (-6 is 1387730121 seconds since 1970-01-01 00:00:00 UTC))</td><td><a href="http://emoncms.org/input/bulk.json?data=[[-10,16,1137],[-8,17,1437,3164],[-6,19,1412,3077]]&time=1418916424">http://emoncms.org/input/bulk.json?data=[[-10,16,1137],[-8,17,1437,3164],[-6,19,1412,3077]]<b>&time=1418916424</b></a></td></tr>
                          </table>

                          <br>
                          <p style="color:white;"><b>Input actions</b>
                          <table class="table">
                            <tr><td style="color:white;opacity: 0.5;">List of inputs</td><td><a href="http://emoncms.org/input/list.json">http://emoncms.org/input/list.json</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">Delete an input</td><td><a href="http://emoncms.org/input/delete.json?id=1">http://emoncms.org/input/delete.json?id=1</a></td></tr>
                          </table>

                          <p style="color:white;"><b>Input process actions</b></p>
                          <table class="table">
                            <tr><td style="color:white;opacity: 0.5;">Add an input process</td><td><a href="http://emoncms.org/input/process/add.json?inputid=1&processid=1&arg=-1&newfeedname=power">http://emoncms.org/input/process/add.json?inputid=1&processid=1&arg=-1&newfeedname=power</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">List input process list</td><td><a href="http://emoncms.org/input/process/list.json?inputid=1">http://emoncms.org/input/process/list.json?inputid=1</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">Delete input process</td><td><a href="http://emoncms.org/input/process/delete.json?inputid=1&processid=1">http://emoncms.org/input/process/delete.json?inputid=1&processid=1</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">Move input process</td><td><a href="http://emoncms.org/input/process/move.json?inputid=1&processid=1&moveby=1">http://emoncms.org/input/process/move.json?inputid=1&processid=1&moveby=1</a></td></tr>
                            <tr><td style="color:white;opacity: 0.5;">Reset input process list</td><td><a href="http://emoncms.org/input/process/reset.json?inputid=1">http://emoncms.org/input/process/reset.json?inputid=1</a></td></tr>
                          </table>
                        </div>
                    </div>
                  </div>
                  <div id="sidebar" class="right">
                    <div style="width:300px;height:70px">
                        <iframe src="http://free.timeanddate.com/clock/i3pk45af/n2342/fn6/fs16/fcfff/tc000/ftb/pa8/tt0/tw1/tm1/th2/ta1/tb4" frameborder="0" width="300" height="58"></iframe>
                        <div class="cl">&nbsp;</div>
                    </div>
                    <div class="box">
                      <h2 class="title" style="color:white">My account</h2>
                      <div class="follow-item">
                        <p><span class="author">Username</span>:</p>
                        <p>{{username}}</p>
                        <a href="#">Switch User</a>
                        <p>&nbsp;</p>
                        <p><span class="author">Email</span>:</p>
                        <p>{{email}}</p>
                        <a href="#">Edit</a>
                        <p>&nbsp;</p>
                        <div id="edit-email-form" class="input-append" style="display:none">
                                <input class="span2" type="text" style="width:150px">
                                <button class="btn" type="button">Save</button>
                        </div>
                        <div id="change-email-error" class="alert alert-error" style="display:none; width:170px"></div>
                        <p><span class="author">Write API Key</span>:</p>
                        <p>{{writeKey}}</p>
                        <a href="#">Generate New Key</a>
                        <p>&nbsp;</p>
                        <p><span class="author">Read API Key</span>:</p>
                        <p>{{readKey}}</p>
                        <a href="#">Generate New Key</a>
                      </div>
                    </div>
{% endblock %}
